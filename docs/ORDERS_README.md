# صفحة الطلبات - Orders Page

## نظرة عامة
تم إنشاء صفحة الطلبات بنفس تصميم صفحات المنتجات والعروض، مع واجهة مستخدم حديثة وسهلة الاستخدام.

## الميزات الرئيسية

### 1. عرض الطلبات
- جدول تفاعلي يعرض جميع الطلبات
- أعمدة متعددة: رقم الطلب، العميل، المنتج، الكمية، السعر، الحالة، الدفع، التاريخ
- ترقيم الصفحات (Pagination)
- ألوان مختلفة لحالات الطلبات والدفع

### 2. إضافة طلب جديد
- نموذج شامل لإضافة طلب جديد
- اختيار العميل من قائمة العملاء
- اختيار المنتج من قائمة المنتجات
- اختيار المستودع من قائمة المستودعات
- حساب تلقائي للسعر الإجمالي
- حقول إضافية: الملاحظات، عنوان الشحن، تاريخ التسليم المتوقع

### 3. تعديل الطلبات
- إمكانية تعديل أي طلب موجود
- تحديث جميع البيانات
- حفظ التغييرات

### 4. حذف الطلبات
- تأكيد الحذف قبل التنفيذ
- حذف آمن مع رسائل تأكيد

## البنية التقنية

### الفرونت إند (React + TypeScript)
- **الملف الرئيسي**: `src/pages/Orders.tsx`
- **المكونات**: 
  - `Orders`: المكون الرئيسي
  - `OrderModal`: نافذة إضافة/تعديل الطلبات
- **الحالة**: إدارة الحالة باستخدام React Hooks
- **التصميم**: Tailwind CSS مع دعم RTL

### الباك إند (Node.js + Express + MongoDB)
- **النموذج**: `server/models/Order.js`
- **الروابط**: `server/routes/orders.js`
- **الميزات**:
  - Pagination
  - Populate للعلاقات
  - حساب تلقائي للسعر الإجمالي
  - إحصائيات الطلبات

## الحقول المطلوبة

### نموذج الطلب
```javascript
{
  orderNumber: String,      // رقم الطلب (مطلوب)
  customer: ObjectId,       // العميل (مطلوب)
  product: ObjectId,        // المنتج (مطلوب)
  warehouse: ObjectId,      // المستودع (مطلوب)
  quantity: Number,         // الكمية (مطلوب)
  sku: String,             // رمز المنتج (مطلوب)
  unitPrice: Number,       // سعر الوحدة (مطلوب)
  totalPrice: Number,      // السعر الإجمالي (يحسب تلقائياً)
  payment: String,         // حالة الدفع (pending/paid/cancelled)
  status: String,          // حالة الطلب (pending/confirmed/shipped/delivered/cancelled)
  notes: String,           // ملاحظات (اختياري)
  shippingAddress: {       // عنوان الشحن (اختياري)
    street: String,
    city: String,
    state: String,
    zipCode: String,
    country: String
  },
  expectedDeliveryDate: Date,  // تاريخ التسليم المتوقع (اختياري)
  actualDeliveryDate: Date     // تاريخ التسليم الفعلي (اختياري)
}
```

## API Endpoints

### الحصول على الطلبات
```
GET /orders?page=1&limit=10
```

### الحصول على طلبات مستودع معين
```
GET /orders/warehouse/:warehouseId?page=1&limit=10
```

### الحصول على طلبات عميل معين
```
GET /orders/customer/:customerId?page=1&limit=10
```

### إضافة طلب جديد
```
POST /orders
```

### تحديث طلب
```
PUT /orders/:id
```

### حذف طلب
```
DELETE /orders/:id
```

### إحصائيات الطلبات
```
GET /orders/stats/summary
```

## الترجمة

### العربية (`src/i18n/locales/ar.json`)
- جميع النصوص مترجمة للعربية
- دعم كامل للـ RTL
- رسائل الخطأ والنجاح

### الإنجليزية (`src/i18n/locales/en.json`)
- جميع النصوص باللغة الإنجليزية
- دعم كامل للـ LTR

## التصميم

### الألوان
- **الأزرق**: الأزرار الرئيسية والروابط
- **الأخضر**: الحالات الإيجابية (مدفوع، تم التسليم)
- **الأصفر**: الحالات الانتظارية (قيد الانتظار)
- **الأحمر**: الحالات السلبية (ملغي، خطأ)
- **الرمادي**: العناصر المحايدة

### الأيقونات
- **ShoppingCart**: أيقونة الطلبات
- **User**: أيقونة العميل
- **Package**: أيقونة المنتج
- **Calendar**: أيقونة التاريخ
- **Edit/Trash2**: أيقونات الإجراءات

## الاستخدام

### إضافة طلب جديد
1. انقر على زر "إضافة طلب"
2. املأ جميع الحقول المطلوبة
3. السعر الإجمالي سيحسب تلقائياً
4. انقر على "حفظ"

### تعديل طلب
1. انقر على أيقونة التعديل بجانب الطلب
2. قم بتعديل البيانات المطلوبة
3. انقر على "حفظ"

### حذف طلب
1. انقر على أيقونة الحذف بجانب الطلب
2. أكد الحذف في النافذة المنبثقة
3. سيتم حذف الطلب نهائياً

## الأمان
- جميع العمليات تتطلب مصادقة
- التحقق من صحة البيانات
- حماية من SQL Injection
- التحقق من الصلاحيات

## الأداء
- Pagination لتحسين الأداء
- Lazy loading للصور
- Caching للبيانات المتكررة
- تحسين الاستعلامات

## الاختبار
- اختبار جميع العمليات CRUD
- اختبار الترجمة
- اختبار التصميم المتجاوب
- اختبار الأمان 